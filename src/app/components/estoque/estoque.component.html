<div class="container">
  <div class="mb-4">
    <list-control
      title="Estoque"
      iconText="boxes"
      btnText="Criar estoque"
      (open)="onOpenForm($event)"
    ></list-control>
  </div>
  <div class="content container p-0">
    @if (isFormOpened && isStockFormOpened) {
    <stock-form (close)="closeForm()" (save)="onSaveStock($event)"></stock-form>

    } @if (isFormOpened && isStockItemFormOpened) {
    <div class="card mb-4">
      <div class="card-body">
        <h5 class="card-title text-white d-flex justify-content-between mb-4">
          Crie um item ({{ formStockName }})
          <button
            (click)="closeForm()"
            type="button"
            class="btn btn-close"
          ></button>
        </h5>
        <form>
          <div class="row">
            <div class="col">
              <div class="form-floating mb-3">
                <input type="text" class="form-control" id="stockItemName" />
                <label for="stockItemName">Nome do item</label>
              </div>
            </div>
            <div class="col">
              <div class="form-floating mb-3">
                <input type="text" class="form-control" id="stockItemDetails" />
                <label for="stockItemDetails">Detalhes do item</label>
              </div>
            </div>
            <div class="col-2">
              <div class="form-floating mb-3">
                <input
                  type="number"
                  class="form-control"
                  id="stockItemDetails"
                />
                <label for="stockItemDetails">Quantidade inicial</label>
              </div>
            </div>
            <div class="col-2">
              <div class="form-floating mb-3">
                <input
                  type="number"
                  class="form-control"
                  id="stockItemDetails"
                />
                <label for="stockItemDetails">Quantidade m√≠nima</label>
              </div>
            </div>
          </div>

          <button
            class="btn btn-primary d-flex justify-content-center gap-2 align-items-center"
          >
            <i class="bi bi-floppy"></i>
            Salvar
          </button>
        </form>
      </div>
    </div>

    } @if (!isFormOpened) {
    <div
      class="btn-group b d-flex w-50 m-auto mb-4"
      role="group"
      aria-label="Basic example"
    >
      <button
        type="button"
        (click)="changeViewType()"
        class="btn w-50"
        [ngClass]="{ active: listViewType === 'stocks' }"
      >
        Estoques
      </button>
      <button
        type="button"
        (click)="changeViewType()"
        class="btn w-50"
        [ngClass]="{ active: listViewType === 'movements' }"
      >
        Movimentos
      </button>
    </div>
    } @if (listViewType === 'stocks') {
    <div *ngIf="stocks$ | async as stocks">
      <stock-list [stocks]="stocks" (openForm)="onOpenStockItemForm($event)"></stock-list>
    </div>

    } @if (listViewType === 'movements') {
    <stock-movement-list></stock-movement-list>
    }
  </div>
</div>
<div class="toast-container position-fixed bottom-0 end-0 p-3">
  <div id="successToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="toast-header  text-white fw-semibold">
      Mensagem do sistema
      <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
    <div class="toast-body fw-semibold">
      {{toastBodyText}}
    </div>
  </div>
  <div id="errorToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="toast-header  text-white fw-semibold">
      Mensagem do sistema
      <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
    <div class="toast-body fw-semibold">
      {{toastBodyText}}
    </div>
  </div>
</div>
